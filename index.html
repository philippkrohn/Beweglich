<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fragebogen für die Personalsuche Beweglich.Org</title>
    <!-- Icon-Bibliothek (Font Awesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Farbpalette inspiriert von beweglich.org */
        :root {
            --primary-dark-green: #004B4B; /* Dunkles Türkis */
            --primary-light-green: #A3D4C8; /* Helles Mintgrün */
            --accent-orange: #F2994A;       /* Akzent Orange */
            --background-light: #FDFBF8;   /* Heller Hintergrund / Beige */
            --text-dark: #333333;           /* Dunkler Text */
            --text-light: #FFFFFF;         /* Heller Text */
            --border-color: #E0E0E0;       /* Rahmenfarbe */
            --success-green: #27AE60;       /* Erfolgsgrün */
            --error-red: #E74C3C;           /* Fehlerrot */
            --completed-bg: #EAF7F4;       /* Hintergrund für erledigte Abschnitte */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--text-light);
            padding: 20px 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        header {
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        header h1 {
            color: var(--primary-dark-green);
            font-size: 2.2rem;
        }

        header p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 10px auto 0;
        }

        .privacy-notice {
            background-color: var(--completed-bg);
            border-left: 4px solid var(--primary-light-green);
            padding: 15px;
            margin: 20px 0;
            font-size: 0.9rem;
            border-radius: 4px;
        }
        
        .progress-bar-container {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: var(--background-light);
            padding: 10px 0;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .progress-bar-inner {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 20px;
            overflow: hidden;
            max-width: 800px; /* Match container width */
            margin: 0 auto;
            position: relative;
        }
        
        #save-indicator {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            color: var(--primary-dark-green);
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .progress-bar {
            width: 0%;
            height: 20px;
            background-color: var(--accent-orange);
            text-align: center;
            line-height: 20px;
            color: white;
            font-weight: bold;
            border-radius: 20px;
            transition: width 0.5s ease-in-out;
        }

        .form-section {
            margin-bottom: 40px;
            padding: 25px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: background-color 0.3s, border-left-color 0.3s;
        }

        .form-section.completed {
            background-color: var(--completed-bg);
            border-left: 5px solid var(--success-green);
        }

        .form-section h2 {
            font-size: 1.5rem;
            color: var(--primary-dark-green);
            margin-top: 0;
            display: flex;
            align-items: center;
        }

        .form-section h2 .icon {
            margin-right: 15px;
            font-size: 1.8rem;
            color: var(--accent-orange);
            width: 40px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
        }
        
        .choice-group-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        input[type="text"],
        input[type="number"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            border-color: var(--accent-orange);
            box-shadow: 0 0 0 3px rgba(242, 153, 74, 0.2);
            outline: none;
        }
        
        .invalid-field {
            border-color: var(--error-red) !important;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2) !important;
        }
        
        input[type="checkbox"], input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .radio-group label, .checkbox-group label {
            display: flex;
            align-items: center;
            margin-right: 20px;
            font-weight: normal;
        }
        
        .info-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: var(--primary-light-green);
            color: var(--primary-dark-green);
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: help;
            margin-left: 8px;
            position: relative;
        }
        
        .tooltip {
            visibility: hidden;
            width: 250px;
            background-color: var(--primary-dark-green);
            color: #fff;
            text-align: center;
            padding: 10px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .info-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .submit-button {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--accent-orange);
            color: var(--text-light);
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-button:hover {
            background-color: #e88630;
        }
        
        #thank-you {
            text-align: center;
            padding: 50px;
            display: none;
        }
        
        #thank-you h1 {
            color: var(--success-green);
            font-size: 2.5rem;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .modal-content h3 {
            color: var(--primary-dark-green);
            margin-top: 0;
        }
        
        .modal-buttons {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .modal-button, .whatsapp-button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.2s;
        }

        .modal-button.primary {
            background-color: var(--primary-dark-green);
            color: white;
        }
        .modal-button.primary:hover {
            background-color: #003a3a;
        }
        
        .modal-button.secondary {
            background-color: var(--border-color);
            color: var(--text-dark);
        }
        .modal-button.secondary:hover {
            background-color: #ccc;
        }

        .whatsapp-button {
            background-color: #25D366;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .whatsapp-button i {
            margin-right: 10px;
        }
        .whatsapp-button:hover {
            background-color: #1EBE57;
        }


        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            header h1 { font-size: 1.8rem; }
            .form-section { padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="progress-bar-container">
        <div class="progress-bar-inner">
            <div id="progressBar" class="progress-bar">0%</div>
            <span id="save-indicator"><i class="fas fa-check"></i> Änderungen gespeichert</span>
        </div>
    </div>
    
    <div class="container">
        <div id="form-content">
            <header>
                <img src="header_beweglich.jpg" alt="Header Bild Praxis Beweglich" style="width: 100%; border-radius: 12px; margin-bottom: 20px; max-height: 400px; object-fit: cover;">
                <h1>Analyse für die Personalsuche</h1>
                <p>Hallo Andrea, vielen Dank, dass du dir die Zeit nimmst. Diese Checkliste hilft uns, deine Praxis perfekt zu verstehen und die passenden Talente für dich zu finden. Das vollständige Ausfüllen dauert ca. 10 Minuten.</p>
                <div class="privacy-notice">
                    <i class="fas fa-shield-alt"></i> <strong>Deine Zeit & deine Daten sind uns wichtig:</strong> Dein Fortschritt wird automatisch und sicher in deinem Browser gespeichert. Du kannst die Bearbeitung jederzeit unterbrechen und später am selben Gerät fortsetzen. Alle deine Angaben werden selbstverständlich streng vertraulich behandelt und ausschließlich für die Dauer unserer Zusammenarbeit verwendet.
                </div>
                <a href="https://wa.me/4915752065959" target="_blank" class="whatsapp-button" style="margin-top: 15px; max-width: 400px; margin-left: auto; margin-right: auto;"><i class="fab fa-whatsapp"></i>Direkte Frage per WhatsApp stellen</a>
            </header>

            <form id="recruiting-form" action="https://formspree.io/f/mzzjaddd" method="POST">
                
                <!-- A. Organisation der Behandlungen -->
                <section class="form-section" id="section-a">
                    <h2><span class="icon"><i class="fas fa-calendar-alt"></i></span>A. Organisation der Behandlungen</h2>
                    <div class="form-group radio-group" data-progress>
                        <label>Wie lange dauert eine Behandlung im Regelfall?</label>
                        <div class="choice-group-options">
                            <label><input type="radio" name="A. Organisation - Behandlungsdauer" value="20"> 20 Minuten</label>
                            <label><input type="radio" name="A. Organisation - Behandlungsdauer" value="30"> 30 Minuten</label>
                        </div>
                    </div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="A. Organisation - 5 Min Puffer"> Zusätzliche 5 Minuten Pause/Puffer pro Termin</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="A. Organisation - Keine Doppelbelegung"> Keine Doppelbelegungen oder Überschneidungen</label></div>
                    <div class="form-group"><label for="max_patienten_tag">Maximale Zahl der Patient:innen pro Therapeut:in pro Tag:</label><input type="number" id="max_patienten_tag" name="A. Organisation - Max Patienten pro Therapeut" data-progress></div>
                    <div class="form-group"><label for="art_behandlungen">Art der Behandlungen (z. B. orthopädisch, neurologisch etc.):</label><input type="text" id="art_behandlungen" name="A. Organisation - Art der Behandlungen" placeholder="Stichworte sind ausreichend" data-progress></div>
                </section>
                
                <!-- B. Aufgaben & Abläufe -->
                <section class="form-section" id="section-b">
                    <h2><span class="icon"><i class="fas fa-tasks"></i></span>B. Aufgaben & Abläufe</h2>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="B. Ablaeufe - Kein Telefondienst"> Therapeut:innen übernehmen keine Telefon- oder Rezeptionsarbeit</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="B. Ablaeufe - Eigenes Orga-Team"> Es gibt ein eigenes Organisationsteam (Terminvergabe, Telefon, Zuzahlungen)</label></div>
                    <div class="form-group"><label for="doku_software">Digitale Dokumentation vorhanden? (Programm/Software):</label><input type="text" id="doku_software" name="B. Ablaeufe - Doku Software" placeholder="z.B. Theorg, Starke Praxis, ... oder 'Nein'" data-progress></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="B. Ablaeufe - Standardisierte Ablauefe"> Standardisierte Abläufe für Doku und Abrechnung vorhanden<span class="info-icon">?<span class="tooltip">Gemeint sind z.B. Standard Operating Procedures (SOPs) oder Checklisten, die sicherstellen, dass alle die gleichen, effizienten Schritte befolgen.</span></span></label></div>
                    <div class="form-group"><label for="wer_macht_bewerbungen">Wer kümmert sich aktuell um Bewerbungen und Verwaltung?</label><input type="text" id="wer_macht_bewerbungen" name="B. Ablaeufe - Zustaendig fuer Bewerbungen" placeholder="Stichworte sind ausreichend" data-progress></div>
                    
                    <div class="form-group radio-group" data-progress>
                        <label>Wie schnell reagierst du aktuell auf eingehende Bewerbungen?</label>
                        <div class="choice-group-options">
                            <label><input type="radio" name="B. Ablaeufe - Reaktionszeit" value="24h"> innerhalb von 24h</label>
                            <label><input type="radio" name="B. Ablaeufe - Reaktionszeit" value="2-3 Tage"> innerhalb von 2-3 Tagen</label>
                            <label><input type="radio" name="B. Ablaeufe - Reaktionszeit" value="spaeter"> später</label>
                        </div>
                    </div>
                    <div class="form-group radio-group" data-progress>
                        <label>Wie erfolgt der Erstkontakt derzeit?</label>
                        <div class="choice-group-options">
                            <label><input type="radio" name="B. Ablaeufe - Erstkontakt" value="Telefon"> Telefonisch</label>
                            <label><input type="radio" name="B. Ablaeufe - Erstkontakt" value="E-Mail"> E-Mail</label>
                            <label><input type="radio" name="B. Ablaeufe - Erstkontakt" value="WhatsApp"> WhatsApp</label>
                            <label><input type="radio" name="B. Ablaeufe - Erstkontakt" value="Persoenlich"> Persönlich</label>
                        </div>
                    </div>
                     <div class="form-group radio-group" data-progress>
                        <label>Wann findet in der Regel das Kennenlerngespräch statt?</label>
                        <div class="choice-group-options">
                            <label><input type="radio" name="B. Ablaeufe - Zeitpunkt Kennenlernen" value="3 Tage"> innerhalb von 3 Tagen</label>
                            <label><input type="radio" name="B. Ablaeufe - Zeitpunkt Kennenlernen" value="1 Woche"> innerhalb einer Woche</label>
                            <label><input type="radio" name="B. Ablaeufe - Zeitpunkt Kennenlernen" value="spaeter"> später</label>
                        </div>
                    </div>

                    <div class="form-group"><label for="prozess_verbessern">Was möchtest du an diesem Ablauf gerne verbessern?</label><textarea id="prozess_verbessern" name="B. Ablaeufe - Verbesserungswunsch Prozess" placeholder="Stichworte oder eine kurze Beschreibung genügen" data-progress></textarea></div>
                </section>
                
                <!-- C. Vergütung & Entwicklung -->
                <section class="form-section" id="section-c">
                    <h2><span class="icon"><i class="fas fa-euro-sign"></i></span>C. Vergütung & Entwicklung</h2>
                    <div class="form-group"><label for="grundgehalt_vz">Grundgehalt (Vollzeit) in €:</label><input type="number" id="grundgehalt_vz" name="C. Verguetung - Grundgehalt Vollzeit" placeholder="z.B. 3500" data-progress></div>
                    <div class="form-group"><label for="zert_zulagen">Zertifikats-Zulagen in € (z. B. MT, MLD, Bobath):</label><input type="text" id="zert_zulagen" name="C. Verguetung - Zertifikats-Zulagen" placeholder="z.B. 150€ pro Zertifikat" data-progress></div>
                    <div class="form-group"><label for="fobi_budget">Fortbildungsbudget pro Jahr in €:</label><input type="number" id="fobi_budget" name="C. Verguetung - Fortbildungsbudget" data-progress></div>
                    <div class="form-group"><label for="fobi_tage">Fortbildungstage pro Jahr:</label><input type="number" id="fobi_tage" name="C. Verguetung - Fortbildungstage" data-progress></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Verguetung - Uebernahme Kursgebuehren"> Übernahme von Kursgebühren (z. B. MT, MLD)</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Verguetung - Unbefristeter Vertrag"> Unbefristeter Arbeitsvertrag</label></div>
                    <div class="form-group"><label for="urlaubstage">Urlaubstage pro Jahr:</label><input type="number" id="urlaubstage" name="C. Verguetung - Urlaubstage" data-progress></div>
                    <hr>
                    <label>Zusätzliche Vorteile:</label>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Benefits - D-Ticket"> Deutschlandticket- oder ÖPNV-Zuschuss (Höhe in €): <input type="number" name="C. Benefits - D-Ticket Hoehe" style="width: 80px; margin-left: 10px;"></label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Benefits - JobRad"> JobRad / Fahrrad-Leasing</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Benefits - BAV"> Betriebliche Altersvorsorge (Zuschuss in €): <input type="number" name="C. Benefits - BAV Hoehe" style="width: 80px; margin-left: 10px;"></label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Benefits - Praemie"> Leistungs- oder Einstiegsprämie (Höhe in €): <input type="number" name="C. Benefits - Praemie Hoehe" style="width: 80px; margin-left: 10px;"></label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="C. Benefits - Wunsch-Teilzeit"> Wunsch-Teilzeit möglich (Umfang in h): <input type="number" name="C. Benefits - Wunsch-Teilzeit Stunden" style="width: 80px; margin-left: 10px;"></label></div>
                    <div class="form-group"><label for="weitere_benefits">Weitere Benefits oder Extras:</label><textarea id="weitere_benefits" name="C. Benefits - Weitere" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                </section>

                <!-- D. Arbeitszeiten & Planung -->
                <section class="form-section" id="section-d">
                    <h2><span class="icon"><i class="fas fa-clock"></i></span>D. Arbeitszeiten & Planung</h2>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="D. Arbeitszeiten - Feste Schichten"> Feste, planbare Schichten (z. B. Früh- / Spätdienste)</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="D. Arbeitszeiten - Keine geteilten Dienste"> Keine geteilten Dienste</label></div>
                    <div class="form-group radio-group" data-progress><label>Wochenend- oder Feiertagsdienste:</label><div class="choice-group-options"><label><input type="radio" name="D. Arbeitszeiten - Wochenenddienste" value="ja"> Ja</label><label><input type="radio" name="D. Arbeitszeiten - Wochenenddienste" value="nein"> Nein</label></div></div>
                    <div class="form-group radio-group" data-progress><label>Möglichkeit zur Dokumentation von zu Hause:</label><div class="choice-group-options"><label><input type="radio" name="D. Arbeitszeiten - Doku von Zuhause" value="ja"> Ja</label><label><input type="radio" name="D. Arbeitszeiten - Doku von Zuhause" value="nein"> Nein</label></div></div>
                    <div class="form-group radio-group" data-progress>
                        <label>Wie werden die Schichten derzeit organisiert?</label>
                        <div class="choice-group-options">
                             <label><input type="radio" name="D. Planung - Schichtorganisation" value="Feste Schichten"> feste Früh-/Spätschichten</label>
                             <label><input type="radio" name="D. Planung - Schichtorganisation" value="Wochenplan"> Wochenplan</label>
                             <label><input type="radio" name="D. Planung - Schichtorganisation" value="Taeglich flexibel"> täglich flexibel</label>
                             <label><input type="radio" name="D. Planung - Schichtorganisation" value="Individuell nach Wunsch"> individuell nach Wunsch</label>
                        </div>
                    </div>
                    <div class="form-group"><label for="arbeitszeitmodelle">Welche Arbeitszeitmodelle möchtest du anbieten?</label><input type="text" id="arbeitszeitmodelle" name="D. Planung - Arbeitszeitmodelle" placeholder="z. B. 30h, 35h, 40h, flexible Teilzeit" data-progress></div>
                </section>

                <!-- E. Team, Einarbeitung & Arbeitskultur -->
                <section class="form-section" id="section-e">
                    <h2><span class="icon"><i class="fas fa-users"></i></span>E. Team, Einarbeitung & Arbeitskultur</h2>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="E. Team - Strukturierte Einarbeitung"> Strukturierte Einarbeitung vorhanden (Dauer in Wochen): <input type="number" name="E. Team - Einarbeitung Dauer" style="width: 80px; margin-left: 10px;"></label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="E. Team - Fester Mentor"> Feste Mentorin / fester Mentor<span class="info-icon">?<span class="tooltip">Ein erfahrener Kollege, der einer neuen Person in den ersten Wochen zur Seite steht, Fragen beantwortet und bei der Einarbeitung hilft.</span></span></label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="E. Team - Teamsitzungen"> Regelmäßige Teamsitzungen oder Fallbesprechungen</label></div>
                    <div class="form-group"><label class="checkbox-label"><input type="checkbox" name="E. Team - Supervision"> Supervision oder kollegiale Beratung</label></div>
                    <div class="form-group"><label for="team_drei_worte">Wie würdest du euer Team in drei Worten beschreiben?</label><input type="text" id="team_drei_worte" name="E. Kultur - Team in 3 Worten" placeholder="z.B. herzlich, professionell, lustig" data-progress></div>
                    <div class="form-group"><label for="zusammenarbeit_wichtig">Was ist dir in der Zusammenarbeit besonders wichtig?</label><textarea id="zusammenarbeit_wichtig" name="E. Kultur - Wichtig bei Zusammenarbeit" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="unterschied_praxis">Was unterscheidet dein Team oder deine Praxis von anderen in der Region?</label><textarea id="unterschied_praxis" name="E. Kultur - Unterscheidungsmerkmal" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="eigenschaften_kollegen">Gibt es bestimmte Eigenschaften, die neue Kolleg:innen unbedingt mitbringen sollten?</label><textarea id="eigenschaften_kollegen" name="E. Kultur - Gewuenschte Eigenschaften" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="schwierigkeiten_bisher">Was war bisher besonders schwierig bei der Zusammenarbeit oder im Arbeitsalltag?</label><textarea id="schwierigkeiten_bisher" name="E. Kultur - Schwierigkeiten bisher" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="stolz_praxis">Gibt es etwas, auf das du in deiner Praxis besonders stolz bist?</label><textarea id="stolz_praxis" name="E. Kultur - Worauf du stolz bist" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="team_rituale">Gibt es Rituale, Teamtage oder besondere Momente, die das Miteinander zeigen?</label><textarea id="team_rituale" name="E. Kultur - Rituale und Teamtage" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                </section>

                <!-- F. Bewerberprofil & Wunschkandidatin -->
                <section class="form-section" id="section-f">
                    <h2><span class="icon"><i class="fas fa-user-check"></i></span>F. Bewerberprofil & Wunschkandidatin</h2>
                    <div class="form-group"><label for="typ_therapeut">Welche Art von Therapeut:in suchst du am dringendsten?</label><input type="text" id="typ_therapeut" name="F. Profil - Gesuchter Typ Therapeut" placeholder="z. B. Berufseinsteiger:in, erfahrene Fachkraft, ..." data-progress></div>
                    <div class="form-group"><label for="wichtige_zertifikate">Welche Erfahrungen oder Zertifikate sind besonders wichtig?</label><input type="text" id="wichtige_zertifikate" name="F. Profil - Wichtige Zertifikate" placeholder="Stichworte sind ausreichend" data-progress></div>
                    <div class="form-group"><label for="wichtige_softskills">Welche Soft Skills oder Werte sind dir besonders wichtig?</label><input type="text" id="wichtige_softskills" name="F. Profil - Wichtige Soft Skills" placeholder="Stichworte sind ausreichend" data-progress></div>
                    <div class="form-group"><label for="vermeiden_bewerbungen">Welche Bewerbungen möchtest du lieber vermeiden?</label><input type="text" id="vermeiden_bewerbungen" name="F. Profil - Zu vermeidende Bewerbungen" placeholder="z. B. unqualifiziert, zu weit entfernt, ..." data-progress></div>
                    <div class="form-group"><label for="beste_ma_gemeinsam">Wenn du an dein aktuelles Team denkst: Was haben die besten Mitarbeitenden gemeinsam?</label><textarea id="beste_ma_gemeinsam" name="F. Profil - Gemeinsamkeiten bester MA" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                    <div class="form-group"><label for="warum_hier_arbeiten">Was glaubst du, warum Menschen gerne bei dir arbeiten – und warum vielleicht nicht?</label><textarea id="warum_hier_arbeiten" name="F. Profil - Gruende fuer Arbeitgeberwahl" placeholder="Stichworte sind ausreichend" data-progress></textarea></div>
                </section>

                <!-- G. Kommunikation & Darstellung -->
                <section class="form-section" id="section-g">
                    <h2><span class="icon"><i class="fas fa-bullhorn"></i></span>G. Kommunikation & Darstellung</h2>
                    <div class="form-group radio-group" data-progress><label>Ansprache in Anzeigen:</label><div class="choice-group-options"><label><input type="radio" name="G. Kommunikation - Ansprache" value="du"> „Du“-Stil</label><label><input type="radio" name="G. Kommunikation - Ansprache" value="sie"> „Sie“-Stil</label></div></div>
                    <div class="form-group radio-group" data-progress><label>WhatsApp Business für Bewerbungen vorhanden:</label><div class="choice-group-options"><label><input type="radio" name="G. Kommunikation - WhatsApp Business" value="ja"> Ja</label><label><input type="radio" name="G. Kommunikation - WhatsApp Business" value="nein"> Nein</label></div></div>
                    <div class="form-group checkbox-group" data-progress>
                        <label>Bevorzugter Kommunikationskanal für Bewerbungen (Mehrfachauswahl möglich):</label>
                        <div class="choice-group-options">
                            <label><input type="checkbox" name="G. Kommunikation - Kanal - WhatsApp" value="ja"> WhatsApp</label>
                            <label><input type="checkbox" name="G. Kommunikation - Kanal - E-Mail" value="ja"> E-Mail</label>
                            <label><input type="checkbox" name="G. Kommunikation - Kanal - Telefon" value="ja"> Telefon</label>
                        </div>
                    </div>
                    <div class="form-group"><label for="wer_erstgespraech">Wer führt das erste Gespräch mit Bewerber:innen?</label><input type="text" id="wer_erstgespraech" name="G. Kommunikation - Wer fuehrt Erstgespraech" data-progress></div>
                    <div class="form-group"><label for="erreichbarkeit_termine">Wann bist du am besten erreichbar für Kennenlern-Termine?</label><input type="text" id="erreichbarkeit_termine" name="G. Kommunikation - Erreichbarkeit" data-progress></div>
                    <div class="form-group radio-group" data-progress><label>Erlaubnis, Praxisräume oder Teamfotos in der Werbung zu zeigen:</label><div class="choice-group-options"><label><input type="radio" name="G. Darstellung - Erlaubnis Fotos zeigen" value="ja"> Ja</label><label><input type="radio" name="G. Darstellung - Erlaubnis Fotos zeigen" value="nein"> Nein</label></div></div>
                    <div class="form-group radio-group" data-progress><label>Bereits vorhandene Fotos/Videos nutzbar:</label><div class="choice-group-options"><label><input type="radio" name="G. Darstellung - Vorhandene Fotos nutzbar" value="ja"> Ja</label><label><input type="radio" name="G. Darstellung - Vorhandene Fotos nutzbar" value="nein"> Nein</label></div></div>
                    <div class="form-group radio-group" data-progress><label>Dürfen neue Fotos oder kurze Videos in der Praxis aufgenommen werden?</label><div class="choice-group-options"><label><input type="radio" name="G. Darstellung - Neue Aufnahmen OK" value="ja"> Ja</label><label><input type="radio" name="G. Darstellung - Neue Aufnahmen OK" value="nein"> Nein</label></div></div>
                    <div class="form-group radio-group" data-progress><label>Darf KI (Künstliche Intelligenz) zur Erstellung von Medieninhalten (z.B. Bilder) verwendet werden?</label><div class="choice-group-options"><label><input type="radio" name="G. Darstellung - KI Medien OK" value="ja"> Ja</label><label><input type="radio" name="G. Darstellung - KI Medien OK" value="nein"> Nein</label></div></div>
                    <div class="form-group"><label for="nicht_zeigen">Gibt es Bereiche oder Personen, die nicht gezeigt werden sollen?</label><input type="text" id="nicht_zeigen" name="G. Darstellung - Tabu-Bereiche" placeholder="Stichworte sind ausreichend" data-progress></div>
                    <div class="form-group"><label for="darstellung_selbst">Wie möchtest du dich selbst auf der Webseite/Anzeige zeigen?</label><input type="text" id="darstellung_selbst" name="G. Darstellung - Eigene Darstellung" placeholder="z. B. im Vordergrund, mit Team, neutral" data-progress></div>
                </section>
                
                <!-- H. Ziele und Erfolgskriterien -->
                <section class="form-section" id="section-h">
                    <h2><span class="icon"><i class="fas fa-bullseye"></i></span>H. Ziele und Erfolgskriterien</h2>
                    <div class="form-group"><label for="ziel_12_wochen">Was wäre für dich ein gutes Ergebnis nach 12 Wochen Kampagne?</label><input type="text" id="ziel_12_wochen" name="H. Ziele - Ergebnis nach 12 Wochen" placeholder="z.B. eine Einstellung, mehrere Gespräche, ..." data-progress></div>
                    <div class="form-group"><label for="wichtiger_schnell_passung">Was ist dir wichtiger: schnelle Besetzung oder perfekte Passung?</label><input type="text" id="wichtiger_schnell_passung" name="H. Ziele - Wichtigkeit schnell vs passend" placeholder="Stichworte sind ausreichend" data-progress></div>
                    <div class="form-group"><label for="aufnahme_kapazitaet">Wie viele neue Mitarbeitende kannst du aktuell aufnehmen?</label><input type="number" id="aufnahme_kapazitaet" name="H. Ziele - Aufnahmekapazitaet" data-progress></div>
                    <div class="form-group"><label for="planung_weitere_stellen">Planst du in den nächsten Monaten weitere Stellen?</label><input type="text" id="planung_weitere_stellen" name="H. Ziele - Planung weitere Stellen" placeholder="z. B. Rezeption, Azubi etc." data-progress></div>
                    <div class="form-group"><label for="reporting">Wie soll über Erfolge berichtet werden?</label><input type="text" id="reporting" name="H. Ziele - Reporting" placeholder="kurze wöchentliche Zusammenfassung, E-Mail, ..." data-progress></div>
                </section>
                
                <!-- I. Persönliche Einblicke -->
                <section class="form-section" id="section-i">
                    <h2><span class="icon"><i class="fas fa-lightbulb"></i></span>I. Persönliche Einblicke (optional)</h2>
                    <div class="form-group"><label for="zufriedene_ma">Besonders zufriedene Bewerbungen/Mitarbeitende der Vergangenheit: Was hat sie ausgezeichnet?</label><textarea id="zufriedene_ma" name="I. Einblicke - Besondere MA der Vergangenheit"></textarea></div>
                    <div class="form-group"><label for="warum_hier_arbeiten_persoenlich">"Warum es sich lohnt, bei mir zu arbeiten..." - Deine persönliche Antwort:</label><textarea id="warum_hier_arbeiten_persoenlich" name="I. Einblicke - Warum es sich lohnt hier zu arbeiten" placeholder="Oft der beste Satz für die Anzeige!"></textarea></div>
                    <div class="form-group"><label for="wissen_vorab">Gibt es etwas, das Bewerber:innen wissen sollten, bevor sie dich kennenlernen?</label><textarea id="wissen_vorab" name="I. Einblicke - Was Bewerber wissen sollten" placeholder="z. B. Umgangston, Werte, Teamspirit, ..."></textarea></div>
                </section>

                <button type="submit" class="submit-button">Alle Angaben an Philipp senden</button>
            </form>
        </div>
        
        <div id="thank-you">
            <span class="icon" style="font-size: 5rem; color: var(--success-green);"><i class="fas fa-check-circle"></i></span>
            <h1>Vielen lieben Dank, Andrea!</h1>
            <p>Deine Antworten wurden erfolgreich an mich übermittelt. Ich melde mich in Kürze bei dir, um die nächsten Schritte zu besprechen.</p>
            <p>Beste Grüße, Philipp</p>
        </div>
    </div>
    
    <!-- Validation Modal -->
    <div id="validation-modal" class="modal-overlay">
        <div class="modal-content">
            <h3>Einen Moment bitte</h3>
            <p>Einige wichtige Fragen scheinen noch unbeantwortet zu sein. Das ist kein Problem, aber vollständige Angaben helfen uns am meisten.</p>
            <div class="modal-buttons">
                 <button id="send-anyway" class="modal-button primary">Trotzdem jetzt senden</button>
                 <button id="back-to-form" class="modal-button secondary">Ich möchte die Fragen ergänzen</button>
                 <a href="https://wa.me/4915752065959" target="_blank" class="whatsapp-button"><i class="fab fa-whatsapp"></i>Frage per WhatsApp stellen</a>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('recruiting-form');
            const sections = document.querySelectorAll('.form-section');
            const progressBar = document.getElementById('progressBar');
            const modal = document.getElementById('validation-modal');
            const sendAnywayBtn = document.getElementById('send-anyway');
            const backToFormBtn = document.getElementById('back-to-form');
            const saveIndicator = document.getElementById('save-indicator');
            let saveTimeout;
            
            const progressElements = form.querySelectorAll('[data-progress]');
            const totalProgressElements = progressElements.length;
            
            const importantFieldIds = [
                'max_patienten_tag', 'art_behandlungen', 'grundgehalt_vz', 'urlaubstage',
                'team_drei_worte', 'unterschied_praxis', 'typ_therapeut', 'ziel_12_wochen', 'aufnahme_kapazitaet'
            ];
            
            const storageKey = 'recruitingFormProgress_beweglich_v4'; // Changed key to avoid conflicts with old version

            function saveProgress() {
                const formData = new FormData(form);
                const data = {};
                for (let [key, value] of formData.entries()) {
                    if (data[key]) {
                        if (!Array.isArray(data[key])) {
                            data[key] = [data[key]];
                        }
                        data[key].push(value);
                    } else {
                        data[key] = value;
                    }
                }
                
                form.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    data[checkbox.name] = checkbox.checked;
                });

                localStorage.setItem(storageKey, JSON.stringify(data));
                
                saveIndicator.style.opacity = '1';
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    saveIndicator.style.opacity = '0';
                }, 2000);
            }

            function loadProgress() {
                const savedData = localStorage.getItem(storageKey);
                if (savedData) {
                    const data = JSON.parse(savedData);
                    for (const key in data) {
                        const elements = form.elements[key];
                        if (elements) {
                             if (elements.type === 'checkbox') {
                                elements.checked = data[key];
                            } else if (elements.nodeName === 'INPUT' && elements.type === 'radio') { // single radio button
                                if(elements.value === data[key]){
                                    elements.checked = true;
                                }
                            } else if (elements.length && typeof elements.forEach === 'function') { // RadioNodeList
                                 elements.forEach(el => {
                                    // Handle array of values for checkboxes
                                    if(Array.isArray(data[key]) && data[key].includes(el.value)) {
                                       el.checked = true;
                                    } else if(el.value === data[key]){
                                        el.checked = true;
                                    }
                                });
                            } else {
                                elements.value = data[key];
                            }
                        }
                    }
                }
            }


            function updateProgress() {
                let answeredCount = 0;
                progressElements.forEach(el => {
                    if (el.classList.contains('radio-group') || el.classList.contains('checkbox-group')) {
                        if (el.querySelector('input:checked')) {
                            answeredCount++;
                        }
                    } else { 
                        if (el.value.trim() !== '') {
                            answeredCount++;
                        }
                    }
                });
                
                const progressPercentage = totalProgressElements > 0 ? Math.round((answeredCount / totalProgressElements) * 100) : 0;
                progressBar.style.width = progressPercentage + '%';
                progressBar.textContent = progressPercentage + '%';

                sections.forEach(section => {
                    const sectionInputs = section.querySelectorAll('[data-progress]');
                    if (sectionInputs.length === 0) return; 

                    let allInSectionAnswered = true;
                    sectionInputs.forEach(input => {
                        let isInputAnswered = false;
                        if (input.classList.contains('radio-group') || input.classList.contains('checkbox-group')) {
                            if (input.querySelector('input:checked')) {
                                isInputAnswered = true;
                            }
                        } else {
                            if (input.value.trim() !== '') {
                                isInputAnswered = true;
                            }
                        }
                        if (!isInputAnswered) {
                            allInSectionAnswered = false;
                        }
                    });

                    if (allInSectionAnswered) {
                        section.classList.add('completed');
                    } else {
                        section.classList.remove('completed');
                    }
                });
            }

            function submitTheForm() {
                const formData = new FormData(form);
                const submitButton = form.querySelector('.submit-button');
                submitButton.textContent = 'Sende Daten...';
                submitButton.disabled = true;

                fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        localStorage.removeItem(storageKey); 
                        document.getElementById('form-content').style.display = 'none';
                        document.querySelector('.progress-bar-container').style.display = 'none';
                        document.getElementById('thank-you').style.display = 'block';
                    } else {
                        response.json().then(data => {
                            let errorMsg = 'Oops! Da ist etwas schiefgelaufen. Bitte versuche es später erneut.';
                            if (data && data.errors) {
                                errorMsg = data.errors.map(error => error.message).join(", ");
                            }
                            alert(errorMsg);
                            submitButton.textContent = 'Alle Angaben an Philipp senden';
                            submitButton.disabled = false;
                        });
                    }
                }).catch(error => {
                    alert('Oops! Ein Netzwerkfehler ist aufgetreten. Bitte überprüfe deine Verbindung und versuche es erneut.');
                    submitButton.textContent = 'Alle Angaben an Philipp senden';
                    submitButton.disabled = false;
                });
            }

            // Initial Setup
            loadProgress();
            updateProgress(); 

            // Event Listeners
            form.addEventListener('input', () => {
                saveProgress();
                updateProgress();
            });
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                document.querySelectorAll('.invalid-field').forEach(el => el.classList.remove('invalid-field'));

                let firstInvalidField = null;
                let isFormIncomplete = false;

                importantFieldIds.forEach(id => {
                    const field = document.getElementById(id);
                    if (field && field.value.trim() === '') {
                        isFormIncomplete = true;
                        field.classList.add('invalid-field');
                        if (!firstInvalidField) {
                            firstInvalidField = field;
                        }
                    }
                });

                if (isFormIncomplete) {
                    modal.style.display = 'flex';
                    if (firstInvalidField) {
                        firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                } else {
                    submitTheForm();
                }
            });
            
            sendAnywayBtn.addEventListener('click', () => {
                modal.style.display = 'none';
                submitTheForm();
            });

            backToFormBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });
            
            modal.addEventListener('click', (e) => {
                if(e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>

